%!TEX TS-program = xelatex
%!TEX encoding = UTF-8 Unicode
%!BIB TS-program = biber
%!BIB program = biber

\documentclass[a4paper,11pt,twoside]{scrbook}

\usepackage[spanish,es-tabla]{babel}
\usepackage{xltxtra}
\usepackage{fontspec}
\usepackage{xunicode}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage[top=3cm,bottom=3cm,outer=3cm,inner=2cm]{geometry}
\usepackage[Bjornstrup]{fncychap}
\usepackage{graphicx}
\usepackage{amssymb}
\usepackage{hyperref}
\usepackage{enumerate}
\usepackage{siunitx}
\usepackage{float}
\usepackage{mdwlist}
\usepackage[table,usenames,dvipsnames]{xcolor}
\usepackage{titlesec}
%\usepackage{subfigure}
%\usepackage{csquotes}
\usepackage[style=authoryear,natbib=true,%
maxbibnames=99,maxcitenames=1,%
citestyle=authoryear-comp,doi=true,url=true,backend=biber,dashed=no]{biblatex}
\bibliography{\jobname}
\usepackage[hypcap]{caption}
\usepackage{hhline}

\usepackage{booktabs}
\usepackage{subcaption}

\usepackage{makeidx}\makeindex
\usepackage{pifont}% http://tex.stackexchange.com/questions/42619/x-mark-to-match-checkmark
\newcommand{\cmark}{{\color{OliveGreen}\ding{51}}}
\newcommand{\xmark}{{\color{red}\ding{55}}}

\theoremstyle{definition}
\newtheorem{definition}{Definición}

\theoremstyle{definition}
\newtheorem{example}{Ejemplo}

%% plantuml %%
\usepackage{filecontents}
\usepackage{tikz}

\sisetup{output-decimal-marker={.},
	product-units=single,
	detect-all, detect-inline-family=text, detect-inline-weight=text,
  detect-display-math=true}

%% minted %%
\floatstyle{ruled}
\usepackage[chapter]{minted}
\newcommand{\codep}[2][python]{%
	\mintinline{#1}{#2}%
}
\renewcommand{\listingscaption}{Código}
\providecommand*{\listingautorefname}{\listingscaption}
\renewcommand{\listoflistingscaption}{Índice de códigos}
\setminted{breaklines=true,linenos=true}

%% estilo %%

\setmonofont[Scale=0.8]{Menlo}
\newfontfamily\portadafont{Arial Bold}


%% reduce widows
\makeatletter
\@beginparpenalty=10000
\makeatother

\begin{document}

\frontmatter

\pagenumbering{gobble}
\clearpage
\input{portada}

\cleardoublepage
\pagenumbering{roman}
\tableofcontents

\mainmatter

%% %% %% %% %% %% %%

\input{estructura-principal}

%% %% %% %% %% %% %%

\backmatter

%% biliografía %%
\nocite{*}
\printbibliography[heading=bibintoc,title=\bibname]

%% índices y tablas %

\cleardoublepage
\addcontentsline{toc}{chapter}{Índice de tablas}
\listoftables

\cleardoublepage
\addcontentsline{toc}{chapter}{Índice de códigos}
\listoflistings

\cleardoublepage
\addcontentsline{toc}{chapter}{Índice alfabético}
\printindex

\end{document}
